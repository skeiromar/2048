{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/gameLogic.js","webpack:///./src/gameRender.js","webpack:///./src/index.js"],"names":["UP","DOWN","LEFT","RIGHT","OFFSETS","merge","line1","line","filter","i","length","push","e","j","TwentyFourtyEight","gridHeight","gridWidth","_grid_height","_grid_width","_is_moved","_grid","_width_height_max","Math","max","_init_tiles","Array","keys","map","reset","string","new_tile","offsets_list","newArr","direction","key","et","each_tile","offsets","temp_list","col","row","tile","remove_offsets","off","offset","elem","zero_ind","weighted_list","floor","random","value","TILE_SIZE","HALF_TILE_SIZE","BORDER_SIZE","TwentyFourtyEightGui","game","tilesAsset","document","getElementById","_rows","get_grid_height","_cols","get_grid_width","_game","addEventListener","event","console","log","move","ctx","getBaseLog","y","x","get_tile","val","drawImage","canvas","getContext","fillStyle","fillRect","width","height","la","start","keydown","setInterval","draw"],"mappings":"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","file":"./dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","\nconst UP = 1;\nconst DOWN = 2;\nconst LEFT = 3;\nconst RIGHT = 4;\n\nconst OFFSETS = {\n    UP: [1, 0],\n    DOWN: [-1, 0],\n    LEFT: [0, 1],\n    RIGHT: [0, -1]\n};\n\nfunction merge(line1) {\n\n    let line = line1.filter(i => i !== 0);\n\n    for (let i = 0; i < line1.length; i++) {\n        if (line1[i] === 0) {\n            line.push(line1[i]);\n        }\n    }\n\n    for (let i = 0; i < line.length-1; i++) {\n        if (line[i] === line[i+1]) {\n                line[i] += line[i + 1];\n                line = line.filter((e, j) => j !== i+1);\n                line.push(0);\n        }\n    }\n            \n    return line;\n}\n\nclass TwentyFourtyEight {\n\n    \n    constructor(gridHeight, gridWidth) {\n        this._grid_height = gridHeight;\n        this._grid_width = gridWidth;\n        this._is_moved = false;\n        this._grid = [];\n\n        this._width_height_max = Math.max(this._grid_width, this._grid_height);\n        this._init_tiles = {\n            UP    : [...Array(this._grid_width).keys()].map((i) => [0,i]), \n            DOWN  : [...Array(this._grid_width).keys()].map((i) => [this._grid_height-1,i]), \n            LEFT  : [...Array(this._grid_height).keys()].map((i) => [i,0]), \n            RIGHT : [...Array(this._grid_height).keys()].map((i) => [i, this._grid_width-1])\n        };  \n        this.reset();\n    }\n    toString() {\n        let string = \"\";\n    \n        this._grid.map(e => string += \"[\" + e  + \"]\" + \"\\n\");\n        return string;\n    }\n    get_grid_height() {\n        return this._grid_height;\n    }\n\n    get_grid_width() {\n        return this._grid_width;\n    }\n\n    reset() {\n\n        this._grid = [...Array(4).keys()].map(e => [...Array(4).keys()].map(e => 0));\n    \n        this.new_tile();\n        this.new_tile();\n    }\n    remove_offsets(offsets_list) {\n        let newArr = [];\n        for (let i = 0; i < offsets_list.length; i++) {\n            if (offsets_list[i] !== offsets_list[i+1]) {\n                newArr.push(offsets_list[i]);\n            }\n        }\n        return newArr;\n    }\n    \n    move(direction) {\n        for (let key in this._init_tiles) {\n            if (direction === key) {\n                for (let et = 0; et < this._init_tiles[key].length; et++) {\n                    let each_tile = this._init_tiles[key][et];\n                    let offsets = [];\n                    let temp_list = [];\n                    let col = 0;\n                    let row = 0;\n                    for (let tile = 0; tile < this._width_height_max; tile++) {\n                        offsets.push([each_tile[0] + OFFSETS[key][0] * col,\n                            each_tile[1] + OFFSETS[key][1] * row]);\n                        \n                        if (tile < this._grid_height - 1) {\n                            col += 1;\n                        }    \n                        if (tile < this._grid_width - 1) {\n                            row += 1;\n                        }\n                    }\n                    offsets = this.remove_offsets(offsets);\n                    for (let off = 0; off < offsets.length; off++) {\n                        let offset = offsets[off];\n                        temp_list.push(this._grid[offset[0]][offset[1]]);\n                    }\n                    temp_list = merge(temp_list);\n                    for (let i = 0; i < offsets.length; i++) {\n                        let offset = offsets[i];\n                        if (this._grid[offset[0]][offset[1]] !== temp_list[i]) {\n                            this._is_moved = true;\n                        }\n                        this._grid[offset[0]][offset[1]] = temp_list[i];\n                    }\n                }\n            }\n\n        }\n        if (this._is_moved) {\n            this.new_tile();\n        }\n\n    }\n    new_tile() {\n        let elem = 42;\n        let zero_ind = 42;\n        let weighted_list = [...Array(100).keys()].map(i => i < 90 ? 2 : 4);\n        \n        while (elem != 0) {\n            zero_ind = [Math.floor(Math.random() * this._grid_height), \n                Math.floor(Math.random() * this._grid_width)];\n\n            elem = this._grid[zero_ind[0]][zero_ind[1]];\n        }\n        this._grid[zero_ind[0]][zero_ind[1]] = weighted_list[Math.floor(Math.random() * weighted_list.length)];\n    }\n\n    set_tile(row, col, value) {\n        this._grid[row][col] = value;\n    }\n    get_tile(row, col) {\n        return(this._grid[row][col]);\n    }\n\n}\nexport default TwentyFourtyEight;\n","\nconst TILE_SIZE = 100;\nconst HALF_TILE_SIZE = TILE_SIZE / 2;\nconst BORDER_SIZE = 45;\n\nconst UP = 1;\nconst DOWN = 2;\nconst LEFT = 3;\nconst RIGHT = 4;\n\nclass TwentyFourtyEightGui {\n    constructor(game) {\n        this.tilesAsset = document.getElementById(\"tile-asset\");\n        this._rows = game.get_grid_height();\n        this._cols = game.get_grid_width();\n        this._game = game;\n    }\n    keydown(key) {\n\n        document.addEventListener('keydown', (event) =>  {\n            console.log(this);\n            if (\"ArrowLeft\" === event.key) \n                this._game.move(\"LEFT\");\n            else if (\"ArrowRight\" === event.key)\n                this._game.move(\"RIGHT\");\n            else if (\"ArrowUp\" === event.key)\n                this._game.move(\"UP\");\n            else if (\"ArrowDown\" === event.key)\n                this._game.move(\"DOWN\");\n\n        }, false);\n\n    }\n\n    draw(ctx) {\n        function getBaseLog(y, x) {\n            return Math.log(y) / Math.log(x);\n        }\n        for (let row = 0; row < this._rows; row++) {\n            for (let col = 0; col < this._cols; col++) {\n                let tile = this._game.get_tile(row, col);\n                \n                let val;\n                if (tile === 0) {\n                    val = 0;\n                } else {\n                    val = Math.floor(getBaseLog(tile, 2));\n                }\n                ctx.drawImage(this.tilesAsset,  \n                    50 + HALF_TILE_SIZE + val * TILE_SIZE - 100, HALF_TILE_SIZE-50,\n                    TILE_SIZE, TILE_SIZE,\n                    col * TILE_SIZE + HALF_TILE_SIZE + BORDER_SIZE - 45,\n                    row * TILE_SIZE + HALF_TILE_SIZE + BORDER_SIZE - 45,\n                    TILE_SIZE, TILE_SIZE);\n            }\n        }\n    }\n\n    start() {\n        this._game.reset();\n    }\n\n}\n\nexport default TwentyFourtyEightGui;\n\n\n\n","import TwentyFourtyEightGui from './gameRender';\nimport TwentyFourtyEight from './gameLogic';\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    let canvas = document.getElementById(\"canvas\");\n    let ctx = canvas.getContext(\"2d\");\n    ctx.fillStyle = \"#BCADA1\";\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    const game = new TwentyFourtyEight(4,4);\n    const la = new TwentyFourtyEightGui(game);\n    \n    la.start();\n    la.keydown();\n    \n    setInterval(() => {\n        la.draw(ctx);\n    }, 16);\n});"],"sourceRoot":""}